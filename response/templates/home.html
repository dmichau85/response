{% extends "adminlte/base.html" %}
{% load static %}
{% load unslackify %}
{% load markdown_filter %}

{% block head %}
<link rel="stylesheet" href="{% static "incident_doc.css" %}">
{% endblock %}


{% block content %}
<div class="row">
  <div class="col-lg-3 col-6">
    <div class="small-box bg-info shadow">
      <div class="inner">
        <h3>
          3 hours
        </h3>
        <p>MTTR</p>
      </div>
      <div class="icon">
        <i class="fas fa-wrench"></i>
      </div>
      <span class="small-box-footer">
        <i class="fas fa-arrow-up"></i> 12.5% <span class="disabled">Since last week</span>
      </span>
    </div>
  </div>
  <div class="col-lg-3 col-6">
    <div class="small-box bg-warning shadow">
      <div class="inner">
        <h3>
          4
        </h3>
        <p>Incident this month</p>
      </div>
      <div class="icon">
        <i class="fas fa-fire"></i>
      </div>
      <span class="small-box-footer">
        <i class="fas fa-arrow-up"></i> 12.5% <span class="disabled">Since last week</span>
      </span>
    </div>
  </div>
  
</div>
<div class="row">
  <div class="col-12">
    <div class="card">
      <div class="card-header">
        <h3 class="card-title">Open incidents</h3>
      </div>
      <div class="card-body">
        <table class="table table-striped">
          <thead>
            <tr>
              <th style="width: 100px">#</th>
              <th style="width: 150px">Severity</th>
              <th style="width: 100px">Status</th>
              <th style="width: 220px">Reported Time</th>
              <th style="width: 320px">Title</th>
              <th>Lead</th>
            </tr>
          </thead>
          <tbody>
            {% for incident in incidents %}
            {% if incident.status_text|upper != 'RESOLVED' %}
            {% include 'incident_row.html' %}
            {% endif %}
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-12">
    <div class="card">
      <div class="card-header">
        <h3 class="card-title">Closed incidents</h3>
      </div>
      <div class="card-body">
        <table class="table table-striped">
          <thead>
            <tr>
              <th style="width: 100px">#</th>
              <th style="width: 150px">Severity</th>
              <th style="width: 100px">Status</th>
              <th style="width: 220px">Reported Time</th>
              <th style="width: 320px">Title</th>
              <th>Lead</th>
            </tr>
          </thead>
          <tbody>
            {% for incident in incidents %}
            {% if incident.status_text|upper == 'RESOLVED' %}
            {% include 'incident_row.html' %}
            {% endif %}
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
{% endblock %}
  